<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to transport data science</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr Robin Lovelace" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Introduction to transport data science
]
.subtitle[
## <br/>Module: Transport Data Science
]
.author[
### Dr Robin Lovelace
]
.date[
### Institute for Transport Studies <br/><img class="img-footer" alt="" src="https://comms.leeds.ac.uk/wp-content/themes/toolkit-wordpress-theme/img/logo.png">
]

---


background-image: url(https://c1.staticflickr.com/2/1216/1096671706_571a263b63_b.jpg)
background-position: 50% 50%
class: center, bottom, inverse

# Credit: Mandeep Lota via [flickr](https://www.flickr.com/photos/deepster2k/1096671706)



---

# Housekeeping

Session timings:

- Taught lecture and questions: 45 minutes
- Practical session part 1: Going through the homework 40 minutes
- Break: 5 minutes
- Practical session part 2: 90 minutes

--

Digital housekeeping and getting to know each other

- Who has access to a laptop?

--

- With R and RStudio installed *and tested*?

--

- Python experience: what packages have you used and for what applications?

--

What do you want to get out of this module?

---

## The Transport Data Science team

#### Robin Lovelace

- Associate Professor of Transport Data Science
- Researching transport futures and active travel planning
- R developer and teacher, author of Geocomputation with R

--

#### Malcolm Morgan

- Senior researcher at ITS with expertise in routing + web
- Developer of the Propensity to Cycle Tool and [PBCC](https://www.carbon.place/#8/51.482/-0.151)

--

#### Zhao Wang

- Civil Engineer and Data Scientist with expertise in machine learning

#### Demonstrators

- Juan Pablo Fonseca Zamorra
- Amelia Pyper

&lt;!-- ### Joey Talbot --&gt;

&lt;!-- - PhD in Tropical Ecology --&gt;
&lt;!-- - Worked for Transport for New Homes --&gt;
&lt;!-- - Research Fellow in Transport Data Science --&gt;

&lt;!-- Not working on it 2021 --&gt;
&lt;!-- ### Richard Connors --&gt;

&lt;!-- - Mathematician by training --&gt;
&lt;!-- - Matlab programmer  --&gt;
&lt;!-- - Expertise in dynamic traffic assignment --&gt;

---


# The history of TDS

- 2017: Transport Data Science created, led by Dr Charles Fox, Computer Scientist, author of Transport Data Science book (Fox, 2018)
- The focus was on databases and Bayesian methods
- 2019: I inherited the module, which was attended by ITS students
- Summer 2019: Python code published in the module 'repo':
  - [github.com/ITSLeeds](https://github.com/ITSLeeds/TDS/tree/master/code-python)
- January 2020: Transport Data Science module available to Data Science and Data Analytics MSc students
- March 2020: Switch to online teaching
- 2021-2023: Updated module, focus on methods
- 2024: Switch to combined practical sessions and lectures
- 2025+: Expand, online course? book? stay in touch!



&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;Milestone passed in my academic career, first online-only delivery of lecture &lt;a href="https://twitter.com/ITSLeeds?ref_src=twsrc%5Etfw"&gt;@ITSLeeds&lt;/a&gt;, seems to have worked, live code demo with &lt;a href="https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#rstats&lt;/a&gt;/&lt;a href="https://twitter.com/rstudio?ref_src=twsrc%5Etfw"&gt;@rstudio&lt;/a&gt;, recording, chat + allðŸŽ‰&lt;br&gt;&lt;br&gt;Thanks students for &amp;#39;attending&amp;#39; + remote participation, we&amp;#39;ll get through this together.&lt;a href="https://twitter.com/hashtag/coronavirus?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#coronavirus&lt;/a&gt; &lt;a href="https://t.co/wlAUxmZj5r"&gt;pic.twitter.com/wlAUxmZj5r&lt;/a&gt;&lt;/p&gt;&amp;mdash; Robin Lovelace (@robinlovelace) &lt;a href="https://twitter.com/robinlovelace/status/1239930988416897033?ref_src=twsrc%5Etfw"&gt;March 17, 2020&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt; 

???

Skip this bit

---

# Essential reading

&lt;!-- - See https://github.com/ITSLeeds/TDS/blob/master/catalogue.md --&gt;

- Chapter 12, [Transportation](http://geocompr.robinlovelace.net/transport.html) of Geocomputation with R, a open book on geographic data in R (available free [online](http://geocompr.robinlovelace.net/))  
- Reproducible Road Safety Research with R (RRSRR): https://itsleeds.github.io/rrsrr/


&lt;img src="https://geocompr.robinlovelace.net/images/cover.png" height="300px" /&gt;&lt;img src="https://r.geocompx.org/13-transport_files/figure-html/desire-1.png" height="300px" /&gt;

---

## Core reading materials

- R for Data Science, an introduction to data science with R (available free [online](http://r4ds.had.co.nz/)) (Grolemund and Wickham, 2016) 

## Optional

There are many good resources on data science for transport applications. 
Do your own research and reading!
The following are good:

- If you're interested in network analysis/Python, see this paper on analysing OSM data in Python (Boeing, 2017) (available [online](https://arxiv.org/pdf/1611.01890)) 

- If you're interested in the range of transport modelling tools, see (Lovelace, 2021)
&lt;!-- [@lovelace_open_2021] --&gt;

For more references, see the bibliography at [github.com/ITSLeeds/TDS](https://github.com/ITSLeeds/TDS/blob/master/catalogue.md#bibliography)

---

# This session in context

-  ## &lt;font color="red"&gt; Introduction to transport data science &lt;/font&gt; 
&lt;!-- - Software for practical data science  --&gt;
- **OD data**
- Routing
&lt;!-- - Data cleaning and subsetting --&gt;
- Accessing data from web sources
- Data visualization
- Project work + data science in practice
&lt;!-- - Machine learning --&gt;
&lt;!-- - Professional issues --&gt;

See timetable online: https://github.com/ITSLeeds/TDS

And an .ics file you can add to your calendar [here](https://github.com/ITSLeeds/TDS/raw/master/timetable.ics).
 

```r
timetable = read_csv("../timetable.csv")
nrow(timetable)
```

```
## [1] 11
```

```r
timetable = timetable %&gt;% 
  mutate(`Duration (Hours)` = duration) %&gt;% 
  select(-description, -duration) %&gt;%
  rename_with(str_to_title)
```

---

## Timetable: January and February


|Summary                  |Date       |Location                             | Duration (Hours)|
|:------------------------|:----------|:------------------------------------|----------------:|
|TDS deadline 1           |2024-02-02 |Online - Teams                       |                0|
|TDS Practical 1: intro   |2024-02-08 |Irene Manton North Cluster (7.96)    |                3|
|TDS Practical 2: od      |2024-02-15 |Irene Manton North Cluster (7.96)    |                3|
|TDS Practical 3: routing |2024-02-22 |Irene Manton North Cluster (7.96)    |                3|
|TDS seminar 1            |2024-02-22 |Institute for Transport Studies 1.11 |                3|
|TDS deadline 2           |2024-02-23 |Online - Teams                       |                0|
|TDS Practical 4: getting |2024-02-29 |Irene Manton North Cluster (7.96)    |                3|
|TDS seminar 2            |2024-03-21 |Institute for Transport Studies 1.11 |                3|

---

## Timetable: March to May


|Summary                        |Date       |Location                          | Duration (Hours)|
|:------------------------------|:----------|:---------------------------------|----------------:|
|TDS Practical 5: visualisation |2024-05-02 |Irene Manton North Cluster (7.96) |                3|
|TDS Practical 6: project       |2024-05-09 |Irene Manton North Cluster (7.96) |                3|
|TDS deadline 3                 |2024-05-17 |Online - Teams                    |                0|


---

## Objectives

&lt;!-- From the course [catalogue](https://github.com/ITSLeeds/TDS/blob/master/catalogue.md): --&gt;

- Understand the structure of transport datasets
- Understand how to obtain, clean and store transport related data
- Gain proficiency in command-line tools for handling large transport datasets
- Produce data visualizations, static and interactive



- &lt;font color="red"&gt; Learn how to join together the components of transport data science into a cohesive project portfolio  &lt;/font&gt; 

---

## Assessment (for those doing this as credit-bearing)

- You will build-up a portfolio of work
- 100% coursework assessed, you will submit by **Friday 19th May**:
  - **a pdf document up to 10 pages long with figures, tables, references explaining how you used data science to research a transport problem**
  - **reproducible code contained in an RMarkdown (.Rmd) document that produced the report**
- Written in RMarkdown - will be graded for reproducibility
- Code chunks and figures are encouraged
- You will submit a non-assessed 2 page pdf + Rmd report by **18th March**

---

## What is transport data science?

- The application of data science to transport datasets and problems

--

- Raising the question...

--

- What is data science?

&lt;!-- You tell me! --&gt;

--

- A discipline "that allows you to turn raw data into understanding, insight, and knowledge" (Grolemund and Wickham, 2016)

--

In other words...

- Statistics that is actually useful!

### Deeper question: why transport data science?

- You must answer that question

---

## What is science?

.pull-left[
- Scientific knowledge is hypotheses that can be falsified
- Science is the process of *generating falsifiable hypotheses* and *testing them*
- In a reproducible way
- Systematically

![](https://media3.giphy.com/media/3ohhworAhxSEHT3zDa/200w.webp?cid=3640f6095c57e8d15767723367d0c596)
]

--

.pull-right[

- Falsifiability is central to the scientific process (Popper, 1959)
- All of which requires software conducive to reproducibility

![](https://duckduckgo.com/i/f2692e7b.jpg)
]

---

## Transport planning software

Transport modelling software products are a vital component of modern transport planning *and* research.

- They generate the evidence base on which strategic investments are made and, furthermore,
- provide a powerful mechanism for researching alternative futures.

--

It would not be an overstatement to say that software determines the range of futures that are visible to policymakers. This makes status of transport modelling software and how it may evolve in the future important questions.

What will transport software look like? What will their capabilities be? And who will control? Answers to each of these questions will affect the future of transport systems. 

--

- Premise: transport planning/modelling software used in practice ~~will become~~ is becoming increasingly data-driven, modular and open. 

---

background-image: url(https://raw.githubusercontent.com/npct/pct-team/master/figures/sdna-san-fran.png)
background-size: cover
class: center, middle

# Current transport software

--

(Source: Crispin Cooper, author of sDNA)

---

.pull-left[


&lt;img src="https://www.robinlovelace.net/presentations/fourstage.png" height="500px" /&gt;

Still dominates transport planning models (Boyce and Williams 2015)
]


--

### The four stage model (left)

- Impacts the current software landscape

- Dominated by a few proprietary products

- Limited support community online 

- High degree of lock-in

- Limited cross-department collaboration

---

# Existing products

&lt;table&gt;
&lt;caption&gt;Sample of transport modelling software in use by practitioners. Note: citation counts based on searches for company/developer name, the product name and 'transport'. Data source: Google Scholar searches, October 2018.&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Software &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Company/Developer &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Company HQ &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Licence &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Citations &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Visum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PTV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Germany &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Proprietary &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1810 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MATSim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TU Berlin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Germany &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Open source (GPL) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1470 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TransCAD &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Caliper &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Proprietary &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; SUMO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DLR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Germany &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Open source (EPL) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1310 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Emme &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; INRO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Canada &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Proprietary &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 780 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Cube &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Citilabs &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Proprietary &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 400 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; sDNA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Cardiff University &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; UK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Open source (GPL) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 170 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# User support

Getting help is vital for leaning/improving software

--

![](https://media.giphy.com/media/6HtgBlXu1TIac/giphy.gif)

--

"10-Hour Service Pack $2,000" (source: [caliper.com/tcprice.htm](https://www.caliper.com/tcprice.htm))

---

# Online communities

- [gis.stackexchange.com](https://gis.stackexchange.com/questions) has 21,314 questions 

- [r-sig-geo](http://r-sig-geo.2731867.n2.nabble.com/) has 1000s of posts

- RStudio's Discourse community has 65,000+ posts already!

--

- No transport equivalent (e.g. earthscience.stackexchange.com is in beta)

- Potential for a Discourse forum or similar: transport is not (just) GIS

---

# Best way to get support is peer-to-peer:

![](https://www.robinlovelace.net/presentations/rstudio-community.png)

Source: https://community.rstudio.com/about

---

# A few prices

![](https://www.robinlovelace.net/presentations/price-transcad.png)&lt;!-- --&gt;

Source: [google.com/search?q=transcad+price](https://www.google.com/search?q=transcad+price)

---

background-image: url(https://media.giphy.com/media/YlQQYUIEAZ76o/giphy.gif)
background-size: cover
class: center, middle


# Future transport software

---

# Is already here I

- Example: the Propensity to Cycle Tool ([PCT.bike](http://www.pct.bike/)) (Lovelace et al. 2017)

![](https://raw.githubusercontent.com/npct/pct-team/master/figures/early.png)&lt;!-- --&gt;

---

## How is data science used in the PCT?

- It's all reproducible, e.g.:
- Find commuting desire lines in West Yorkshire between 1 and 3 km long in which more people drive than cycle:





```r
# Set-up, after installing R and checking out www.pct.bike:
u = "https://github.com/ITSLeeds/TDS/releases/download/0.1/desire_lines.geojson"
library(dplyr)
library(sf)
desire_lines = read_sf(u)
```

---

## Visualising data

A fundamental part of data science is being able to understand your data.

That requires visualisation, R is great for that:

.pull-left[

```r
plot(desire_lines)
```

![](1-intro_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;

]

.pull-right[
- Interactively:


```r
library(tmap)
tm_shape(desire_lines) + tm_lines("all")
```

]

---

## Processing data with code

- Now we have data in our computer, and verified it works, we can use it

- Which places are most car dependent? 


```r
car_dependent_routes = desire_lines %&gt;% 
  mutate(percent_drive = car_driver / all * 100) %&gt;% 
  filter(rf_dist_km &lt; 3 &amp; rf_dist_km &gt; 1) 
```

---

## Checking the results:


```r
b = c(0, 25, 50, 75)
tm_shape(car_dependent_routes) +
  tm_lines(col = "percent_drive", lwd = "all", scale = 5, breaks = b, palette = "-inferno")
```

```
## tm_lines: Deprecated tmap v3 code detected. Code translated to v4
```

![](1-intro_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;


---

# Is already here II

- Example: the Cycling Infrastructure Prioritisation Toolkit ([CyIPT.bike](https://www.cyipt.bike))

![](https://www.cyipt.bike/images/existing-edit.png)&lt;!-- --&gt;

---

# R vs Python

- Lots of debate on this topic - see https://blog.usejournal.com/python-vs-and-r-for-data-science-833b48ccc91d

--

How to decide?

--

- If priority: getting things done quick (with support from me ;) go with R
- If you already know Python and are **100% confident you can generate reproducible results**, go with that
- If you want to be avant-garde and try something else like Julia, do it (as long as it's reproducible)

--

![](https://cdn-images-1.medium.com/max/1600/1*Mk54CziKpHi65sdlwBZcCg.png)

---

# Sumo vs netlogo (vs R/Python)

&lt;img src="https://user-images.githubusercontent.com/1825120/46748345-41c98580-ccab-11e8-8093-b265bd36f639.gif" width="70%" /&gt;

Source: [github.com/eclipse/sumo](https://github.com/eclipse/sumo/issues/2409)

.pull-left[

&lt;img src="https://raw.githubusercontent.com/nldoc/nlrx/master/man/figures/logo.png" width="20%" /&gt;

]

Source: [github.com/nldoc/nlrx](https://github.com/nldoc/nlrx)

---

### Gamification

![](https://raw.githubusercontent.com/dabreegster/abstreet/master/book/exploring_traffic.gif)&lt;!-- --&gt;

- Completely open source, written in [rust](https://github.com/citybound/citybound)
- Source: video at https://github.com/dabreegster/abstreet/#ab-street

---

background-image: url(https://media.giphy.com/media/OMeGDxdAsMPzW/giphy.gif)
background-size: cover
class: center, middle, inverse

# Code example / questions

---

# Summary

- Walk and understand the data before doing complex things
- Visualise the data, ask questions of it, descriptive stats
- Only then add complexity to your analysis
- Starting point for this: [Transport chapter](https://geocompr.robinlovelace.net/transport.html) of Geocomputation with R 

---

## Practical session will involve...

See https://github.com/ITSLeeds/TDS/blob/master/practicals/1-intro.md

That's your working document for today.

&lt;!-- - Definition of transport data science --&gt;
&lt;!-- - About you, level and hopes for the course --&gt;
&lt;!-- - Thinking about research methods (you will need pens) --&gt;
&lt;!-- - The structure of transport datasets --&gt;
&lt;!--   - How cities are divided up into zones --&gt;
&lt;!--   - Desire lines representing movement --&gt;
&lt;!--   - Routes between locations --&gt;
&lt;!--   - Route networks --&gt;
&lt;!--   - Agents --&gt;

---

# References

Boeing, Geoff (2017). "OSMnx: New Methods for Acquiring,
Constructing, Analyzing, and Visualizing Complex Street Networks".
In: _Computers, Environment and Urban Systems_ 65, pp. 126-139.
ISSN: 0198-9715. DOI: [10/gbvjxq](https://doi.org/10%2Fgbvjxq).

Fox, Charles (2018). _Data Science for Transport: A Self-Study
Guide with Computer Exercises_. 1st ed. 2018 edition. New York, NY:
Springer. ISBN: 978-3-319-72952-7.

Grolemund, Garrett and Hadley Wickham (2016). _R for Data Science_.
O'Reilly Media. ISBN: 978-1-4919-1039-9.

Lovelace, Robin (2021). "Open Source Tools for Geographic Analysis
in Transport Planning". In: _Journal of Geographical Systems_.
ISSN: 1435-5949. DOI: [10/ghtnrp](https://doi.org/10%2Fghtnrp).

Popper, Karl (1959). _The Logic of Scientific Discovery_.
Hutchinson.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
